<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Waternet - Gamebuino Meta</title>
    <meta name="author" content="Willems Davy" />
		<script>
			function setIframeSrc()
			{
				const iframe = document.querySelector('#iframe');
				urlnotouch = "./emulator-fullscreen.html";
				urltouch = "./console2-fullscreen.html";
				if (window.matchMedia("(any-pointer:coarse)").matches)
					iframe.setAttribute('src', urltouch);
				else
					iframe.setAttribute('src', urlnotouch);
			}
	  </script>
    <script>
    if(window.parent)
    {
      window.document.addEventListener('keydown', (event) => {
        if(event.key == "Escape")
        {
          console.log('sended quit');
          window.parent.postMessage(JSON.stringify({name:"quit"}), "*");
        }
      });
      
      window.addEventListener('load', (event) => {
        console.log('sended start');
        document.body.focus() ;
        window.parent.postMessage(JSON.stringify({name: "start"}), "*");
      });
    }
    </script>
    <script src="./gamecontroller.min.js" >
      gameControl.on('connect', function(gamepad) {
        gamepad.before('start', functions() {
          console.log('sended gamepad quit');
          window.parent.postMessage(JSON.stringify({name:"quit"}), "*");
        });
      });
    </script>
	</head>
  <body onload="setIframeSrc();">
    <iframe id="iframe" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;" src="" />
  </body>
</html>